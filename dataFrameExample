import yfinance as yf
import pandas as pd

validStocks = pd.DataFrame(columns=['Ticker', 'Company Name', 'Sector'])

# These stocks will work, but if we add a stock like 'INTC' it will break because since they're losing money they have no trailingPE to grab
tickersList = ['MSFT', 'AAPL', 'NVDA']

for ticker in tickersList:
    stock = yf.Ticker(ticker)
    data = stock.info

    dfTemp = pd.DataFrame({'Ticker': [data['symbol']],
                        'Company Name': [data['longName']],
                        'Sector': [data['sector']],
                        'Industry': [data['industry']],
                        'Market Cap': [data['marketCap']],
                        'Price': [data['currentPrice']],
                        'P/E': [data['trailingPE']],
                        'Dividend Rate': [data['dividendRate']],
                        'Analyst Recommendation': [data['recommendationKey']]
                        })

    validStocks = pd.concat([validStocks, dfTemp], ignore_index=True)

print(validStocks)
